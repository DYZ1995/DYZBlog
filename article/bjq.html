<!DOCTYPE html>
<html lang="en"><head><script src="../articleSorce/bjq/a.htm" charset="utf-8" id="uyan_script"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="keywords" content="代远诏,Redspite,富文本输入框,编辑器手写,div可编辑,表情输入框,javascript,css">
    <meta name="description" content="DYZ 带表情包的富文本输入框手写插件,可插入图片、可获取代码。">
    <meta name="author" content="代远诏,DYZ">
    <title>RedSpite » 带表情包的富文本输入框手写插件</title>

    <link rel="stylesheet" href="../articleSorce/bjq/bootstrap.css">
    <link rel="stylesheet" href="../articleSorce/bjq/syntaxy.css">
    <link rel="stylesheet" href="../articleSorce/bjq/base.css" type="text/css">
    <link rel="stylesheet" href="../articleSorce/bjq/style.css" type="text/css">
    <link rel="stylesheet" href="../articleSorce/bjq/bjq.css">

<script src="../articleSorce/bjq/push.js"></script><script src="../articleSorce/bjq/hm.js"></script><script>
var _hmt = _hmt || [];
(function() {
var hm = document.createElement("script");
hm.src = "//hm.baidu.com/hm.js?f87e415f9d1f6111b1d34c5f96927d9b";
var s = document.getElementsByTagName("script")[0];
s.parentNode.insertBefore(hm, s);
})();
</script>
 <!--[if lte IE 9]>   <script type="text/javascript">      window.location = "http://www.xiaoyuezhang.com/error.html"  </script><![endif]--></head>
<body>
<div class="content">

    <div class=" container">
        <div id="top">
            <img src="../articleSorce/bjq/top.png" alt="回到顶部">
        </div>
        <div class="header-box fadein">
            <img src="../images/myPhoto.jpg" alt="我的头像">
        </div>
        <div class="center">
            <p class="myid">DYZ</p>
        </div>
        <div class="my-sort center">
            <a href="../index.html">主页</a>
            <a href="../techBlog.html">列表</a>
            <a href="../messageBoard.html">留言</a>
        </div>
        <div id="artical-detail">
            <h4>带表情包的富文本输入框手写插件</h4>
            <p>说到文本输入，我们常用的有 textarea 还有input[type="text"]，这两位能完成基本的文本输入。
                可是当我们希望评论区域趣味一点，追求更高一点的时候捏，这两位就都得靠边站了，为啥？
                因为都不支持图片输入啊~ 如果往里面插入图片，他两是没有反应的。<br><br></p>
            <p>当然，稍微了解的都知道div的 <strong> contenteditable = true</strong>，即是可以让div变身成可输入文本框的神奇属性。
                而且！！最重要的是<strong>可以插入图片啦！</strong>咋们终于能在评论区域来一次表情包大战了~
            <br><br></p>
            <h5>先来个预览：</h5>
            <div id="mybjq"><div id="editor_div"><p class="editor_toolbar"><button class="editor_img" title="表情包"></button><br><br></p><div class="editor_bqdiv hide"><div class="editor_tc editor_tcl"></div><div class="editor_tc editor_tcr"></div><ul class="editor_sort">     <li id="tsj" class="active">兔斯基</li>     <li id="ka">可爱搞笑</li>  </ul>  	<div class="editor_bqbbox tsj ">  	   <!-- 兔斯基表情包 -->  	    <table class="tsj">      	<tbody><tr><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td></tr><tr><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td></tr><tr><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td></tr><tr><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td></tr></tbody></table>  	</div>  	<div class="editor_bqbbox ka hide">  	   <!-- 可爱搞笑表情包 -->  	    <table class="ka">      	<tbody><tr><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td></tr><tr><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjqs/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td></tr><tr><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td><td title=""><img src="../articleSorce/bjq/0.gif" alt=""></td></tr></tbody></table>  	</div></div><div class="textArea" id="editor_textarea" contenteditable="true"></div></div></div>
            <p> <button id="alert">点击获取输入框内的html</button><br><br></p>
            <p>这不就是我们要的吗？  赶紧撸起袖子，大干一场。<br><br></p>
            <h5>Html:</h5>
            <div class="code">
                <pre class="codebox" data-type="blank" style="margin: 0px; padding: 0px; border: 0px none; text-align: left; display: block;"><div class="stx-wrap"><div class="stx-header stx-clear"><div class="stx-left">Source code</div><div class="stx-right"><button class="stx-error-btn stx-important" type="button" title="Process error">!!!</button> <button class="stx-toggle-btn" type="button" title="Toggle line numbers">☀</button> <span>1 line</span></div></div><div class="stx-scroller" style="min-height: 100px; max-height: 600px; "><div class="stx-line-wrap stx-lighter" data-line="1"><div class="stx-line-code stx-nowrap">&lt;div contenteditable="true"&gt;&lt;/div&gt;</div></div></div></div></pre>
            </div>
            <p>这就已经完成一大半啦！哈哈 就是这么简单<br><br></p>
            <p>接下来就是表情包的事了，表情包原理其实很简单。<br><br></p>
            <p><strong>1.</strong> 首先是要准备一个所有表情截图spirits,尽量做成一个竖着的排版，这样截取表情方便一些。如下<br><br></p>
            <p><img src="../articleSorce/bjq/bjq-ct.png" alt="表情spirts"><br><br></p>
            <p><strong>2. </strong>每一个截图区域取固定大小，背景图就是这块spirits,通过调节background-position，对应每个不同的表情。<br><br></p>
            <h5>Html:</h5>
            <div class="code">
                <pre class="codebox" data-type="blank" style="margin: 0px; padding: 0px; border: 0px none; text-align: left; display: block;"><div class="stx-wrap"><div class="stx-header stx-clear"><div class="stx-left">Source code</div><div class="stx-right"><button class="stx-error-btn stx-important" type="button" title="Process error">!!!</button> <button class="stx-toggle-btn" type="button" title="Toggle line numbers">☀</button> <span>9 lines</span></div></div><div class="stx-scroller" style="min-height: 100px; max-height: 600px; "><div class="stx-line-wrap stx-lighter" data-line="1"><div class="stx-line-code stx-nowrap">&lt;table&gt;</div></div><div class="stx-line-wrap stx-darker" data-line="2"><div class="stx-line-code stx-nowrap">    &lt;tbody&gt;</div></div><div class="stx-line-wrap stx-lighter" data-line="3"><div class="stx-line-code stx-nowrap">        &lt;tr&gt;</div></div><div class="stx-line-wrap stx-darker" data-line="4"><div class="stx-line-code stx-nowrap">            &lt;td&gt;&lt;/td&gt;</div></div><div class="stx-line-wrap stx-lighter" data-line="5"><div class="stx-line-code stx-nowrap">            &lt;td&gt;&lt;/td&gt;</div></div><div class="stx-line-wrap stx-darker" data-line="6"><div class="stx-line-code stx-nowrap">            &lt;td&gt;...&lt;/td&gt;</div></div><div class="stx-line-wrap stx-lighter" data-line="7"><div class="stx-line-code stx-nowrap">        &lt;/tr&gt;</div></div><div class="stx-line-wrap stx-darker" data-line="8"><div class="stx-line-code stx-nowrap">    &lt;/tbody&gt;</div></div><div class="stx-line-wrap stx-lighter" data-line="9"><div class="stx-line-code stx-nowrap">&lt;/table&gt;</div></div></div></div></pre>
            </div>
            <h5>Css:</h5>
            <div class="code">
                <pre class="codebox" data-type="blank" style="margin: 0px; padding: 0px; border: 0px none; text-align: left; display: block;"><div class="stx-wrap"><div class="stx-header stx-clear"><div class="stx-left">Source code</div><div class="stx-right"><button class="stx-error-btn stx-important" type="button" title="Process error">!!!</button> <button class="stx-toggle-btn" type="button" title="Toggle line numbers">☀</button> <span>14 lines</span></div></div><div class="stx-scroller" style="min-height: 100px; max-height: 600px; "><div class="stx-line-wrap stx-lighter" data-line="1"><div class="stx-line-code stx-nowrap">td{</div></div><div class="stx-line-wrap stx-darker" data-line="2"><div class="stx-line-code stx-nowrap">    width: 45px;</div></div><div class="stx-line-wrap stx-lighter" data-line="3"><div class="stx-line-code stx-nowrap">    height: 35px;</div></div><div class="stx-line-wrap stx-darker" data-line="4"><div class="stx-line-code stx-nowrap">    padding: 0 5px;</div></div><div class="stx-line-wrap stx-lighter" data-line="5"><div class="stx-line-code stx-nowrap">    cursor: pointer;</div></div><div class="stx-line-wrap stx-darker" data-line="6"><div class="stx-line-code stx-nowrap">    background: url(bjq-ct.png)  no-repeat scroll left top;</div></div><div class="stx-line-wrap stx-lighter" data-line="7"><div class="stx-line-code stx-nowrap">}</div></div><div class="stx-line-wrap stx-darker" data-line="8"><div class="stx-line-code stx-nowrap">td:nth-child(1){</div></div><div class="stx-line-wrap stx-lighter" data-line="9"><div class="stx-line-code stx-nowrap">    background-position: left 0;</div></div><div class="stx-line-wrap stx-darker" data-line="10"><div class="stx-line-code stx-nowrap">}</div></div><div class="stx-line-wrap stx-lighter" data-line="11"><div class="stx-line-code stx-nowrap"> td:nth-child(2){</div></div><div class="stx-line-wrap stx-darker" data-line="12"><div class="stx-line-code stx-nowrap">    background-position: left -35px;</div></div><div class="stx-line-wrap stx-lighter" data-line="13"><div class="stx-line-code stx-nowrap">}</div></div><div class="stx-line-wrap stx-darker" data-line="14"><div class="stx-line-code stx-nowrap">...</div></div></div></div></pre>
            </div>
            <p>当表情包多了的时候就用js控制背景位置~~<br><br></p>
            <p><strong>3. </strong>最后一步，我们事先将表情包的图片对应 spirts上的截图顺序编号。
                当点击截图td时，获取该截图的 <strong>index()</strong>  也就是这个截图我们给他的序号，然后向div里append
                对应序号的表情图片，大功告成。
            <br><br></p>

            <p>当然 原理很简单，但是真正写的时候遇到的麻烦事还是挺多的，慢慢练手吧~<br><br></p>
            <div class="flow">
                <!-- UY BEGIN -->
                <div id="uyan_frame" class="fl half"></div>
                <script type="text/javascript" src="../articleSorce/bjq/uyan.js"></script><script type="text/javascript" src="../articleSorce/bjq/plugin.js" charset="utf-8"></script>
                <!-- UY END -->
                <div class="half fr">
                </div>
            </div>
            <p class="artical-detail-date">2017.01.11<br><br></p>

        </div>
    </div>
</div>
<script src="../articleSorce/bjq/jquery-1.js"></script>
<script src="../articleSorce/bjq/syntaxy.js"></script>
<script src="../articleSorce/bjq/myjs.js"></script>
<script src="../articleSorce/bjq/bjq.js"></script>
<script>
    $(document).ready(function () {
        $(".header-box").addClass("fadein");
        $("#artical-detail p").append("<br/><br/>");

        //编辑器弹出内容
        $("#alert").click(function(){
           alert($("#editor_textarea ").html())
        });
    });


</script>
<script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>



</body></html>